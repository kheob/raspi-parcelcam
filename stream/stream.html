<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Stream</title>
</head>
<body>
    <img src="/?action=stream">
    <a id="start" href="#">Start</a>
    <a id="stop" href="#">Stop</a>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script>
        $('#start').on('click', function(event) {
            event.preventDefault();

            // Get own IP address
            $.getJSON('http://jsonip.com/?callback=?', function (data) {
                var ip = data.ip;
                $.get('http://' + ip + ':3000/stream?start=true', function() {
                    console.log('Camera started');
                });
            });
        });

        $('#stop').on('click', function(event) {
            event.preventDefault();

            // Get own IP address
            $.getJSON('http://jsonip.com/?callback=?', function (data) {
                var ip = data.ip;
                $.get('http://' + ip + ':3000/stream?start=false', function() {
                    console.log('Camera stopped');
                });
            });
        });
    </script>
</body>
</html>